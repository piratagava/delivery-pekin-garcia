"use strict";(self.webpackChunkdelivery_pekin_garcia=self.webpackChunkdelivery_pekin_garcia||[]).push([[608],{9608:(U,g,a)=>{a.r(g),a.d(g,{MenuModule:()=>A});var v=a(9032),c=a(467),l=a(4341),e=a(540),f=a(1629),b=a(5794),d=a(177);function F(i,t){if(1&i&&(e.j41(0,"option",41),e.EFF(1),e.k0s()),2&i){const n=t.$implicit;e.Y8G("value",n.idRestaurante),e.R7$(1),e.SpI(" ",n.nombre," ")}}function E(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," Debe seleccionar un restaurante "),e.k0s())}function _(i,t){if(1&i&&(e.j41(0,"div",42),e.DNE(1,E,2,0,"div",43),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",null==n.restauranteId||null==n.restauranteId.errors?null:n.restauranteId.errors.required)}}function h(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," El nombre es requerido "),e.k0s())}function G(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," M\xe1ximo 100 caracteres permitidos "),e.k0s())}function k(i,t){if(1&i&&(e.j41(0,"div",42),e.DNE(1,h,2,0,"div",43),e.DNE(2,G,2,0,"div",43),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",null==n.nombre||null==n.nombre.errors?null:n.nombre.errors.required),e.R7$(1),e.Y8G("ngIf",null==n.nombre||null==n.nombre.errors?null:n.nombre.errors.maxlength)}}function C(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," La descripci\xf3n es requerida "),e.k0s())}function M(i,t){if(1&i&&(e.j41(0,"div",42),e.DNE(1,C,2,0,"div",43),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",null==n.descripcion||null==n.descripcion.errors?null:n.descripcion.errors.required)}}function j(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," El precio es requerido "),e.k0s())}function R(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," El precio m\xednimo es $0.50 "),e.k0s())}function I(i,t){if(1&i&&(e.j41(0,"div",42),e.DNE(1,j,2,0,"div",43),e.DNE(2,R,2,0,"div",43),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",null==n.precio||null==n.precio.errors?null:n.precio.errors.required),e.R7$(1),e.Y8G("ngIf",null==n.precio||null==n.precio.errors?null:n.precio.errors.min)}}function P(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," La categor\xeda es requerida "),e.k0s())}function D(i,t){if(1&i&&(e.j41(0,"div",42),e.DNE(1,P,2,0,"div",43),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",null==n.categoria||null==n.categoria.errors?null:n.categoria.errors.required)}}function $(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," El tiempo es requerido "),e.k0s())}function T(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," M\xednimo 5 minutos "),e.k0s())}function Y(i,t){if(1&i&&(e.j41(0,"div",42),e.DNE(1,$,2,0,"div",43),e.DNE(2,T,2,0,"div",43),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",null==n.tiempoPreparacion||null==n.tiempoPreparacion.errors?null:n.tiempoPreparacion.errors.required),e.R7$(1),e.Y8G("ngIf",null==n.tiempoPreparacion||null==n.tiempoPreparacion.errors?null:n.tiempoPreparacion.errors.min)}}function N(i,t){1&i&&(e.j41(0,"div"),e.EFF(1," La Disponibilidad del producto es requerida "),e.k0s())}function y(i,t){if(1&i&&(e.j41(0,"div",42),e.DNE(1,N,2,0,"div",43),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",null==n.disponible||null==n.disponible.errors?null:n.disponible.errors.required)}}function q(i,t){if(1&i&&(e.j41(0,"div",44),e.nrm(1,"img",45),e.k0s()),2&i){const n=e.XpG();e.R7$(1),e.Y8G("src",n.imagenPrevia,e.B4B)}}const s=function(i){return{"is-invalid":i}},B=[{path:"guardar",component:(()=>{class i{constructor(n,o,r){this.fb=n,this._menuUseCase=o,this.toastr=r,this.imagenPrevia=null,this.imagenArchivo=null,this.getRestaurantMenu=[],this.platilloForm=this.fb.group({restauranteId:["",l.k0.required],nombre:["",[l.k0.required,l.k0.maxLength(100)]],descripcion:["",l.k0.required],precio:[0,[l.k0.required,l.k0.min(.5)]],categoria:["",l.k0.required],tiempoPreparacion:[0,[l.k0.required,l.k0.min(5)]],disponible:["",l.k0.required]})}ngOnInit(){this.getListRestaurantes()}getListRestaurantes(){var n=this;return(0,c.A)(function*(){yield n._menuUseCase.getRestarantSelectMenu().subscribe({next:o=>{n.getRestaurantMenu=o},error:o=>{console.error("Error al cargar restaurantes:",o)}})})()}onFileSelected(n){const o=n.target.files[0];if(o){if(o.size>2097152)return void alert("El archivo es demasiado grande (m\xe1ximo 2MB)");this.imagenArchivo=o;const r=new FileReader;r.onload=()=>{this.imagenPrevia=r.result,this.imagenBase64=r.result.split(",")[1]},r.readAsDataURL(o)}}onSubmit(){var n=this;return(0,c.A)(function*(){if(n.platilloForm.valid){const r={idRestaurante:n.platilloForm.get("restauranteId")?.value,nombre:n.platilloForm.get("nombre")?.value,descripcion:n.platilloForm.get("descripcion")?.value,precio:n.platilloForm.get("precio")?.value,cantidad:1,categoria:n.platilloForm.get("categoria")?.value,tiempoPreparacion:n.platilloForm.get("tiempoPreparacion")?.value,isDisponible:n.platilloForm.get("disponible")?.value,imagenUrl:n.imagenBase64};console.log("Objeto a guardar:",r);try{const u=yield n._menuUseCase.getResponseGuardaMenu(r),{statusCodeEjecuteProcedure:p,message:m}=u;200===p?(n.toastr.success(m),n.onCancel()):(console.log("Error:",m),n.toastr.error(m))}catch{n.toastr.error("Error al procesar la solicitud")}}else n.platilloForm.markAllAsTouched()})()}onCancel(){this.platilloForm.get("nombre")?.reset(),this.platilloForm.get("descripcion")?.reset(),this.platilloForm.get("precio")?.reset(),this.platilloForm.get("tiempoPreparacion")?.reset(),this.imagenPrevia=null,this.imagenArchivo=null,this.imagenBase64=null,document.getElementById("imagen").value=""}getListMenu(){var n=this;return(0,c.A)(function*(){yield n._menuUseCase.getResposeMenuList().subscribe({next:o=>{n.getRestaurantMenu=o},error:o=>{console.error("Error al cargar restaurantes:",o)}})})()}get restauranteId(){return this.platilloForm.get("restauranteId")}get nombre(){return this.platilloForm.get("nombre")}get descripcion(){return this.platilloForm.get("descripcion")}get precio(){return this.platilloForm.get("precio")}get categoria(){return this.platilloForm.get("categoria")}get tiempoPreparacion(){return this.platilloForm.get("tiempoPreparacion")}get disponible(){return this.platilloForm.get("disponible")}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(l.ok),e.rXU(f.t),e.rXU(b.tw))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-guardar-menu"]],decls:76,vars:32,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6"],[1,"card","shadow"],[1,"card-header","bg-gradient-orange-red","text-white"],[1,"mb-0","text-center"],[1,"card-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","restaurante",1,"form-label"],["id","restaurante","formControlName","restauranteId",1,"form-select",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control",3,"ngClass"],["for","descripcion",1,"form-label"],["id","descripcion","rows","3","formControlName","descripcion",1,"form-control",3,"ngClass"],["for","precio",1,"form-label"],["type","number","step","0.01","id","precio","formControlName","precio",1,"form-control",3,"ngClass"],["for","categoria",1,"form-label"],["id","categoria","formControlName","categoria",1,"form-select",3,"ngClass"],["value","ENTRADA"],["value","PLATO_FUERTE"],["value","POSTRE"],["value","BEBIDA"],["for","tiempoPreparacion",1,"form-label"],["type","number","id","tiempoPreparacion","formControlName","tiempoPreparacion",1,"form-control",3,"ngClass"],["for","disponible",1,"form-label"],["id","disponible","formControlName","disponible",1,"form-select",3,"ngClass"],["value","1"],["value","0"],[1,"mb-4"],["for","imagen",1,"form-label"],["type","file","id","imagen","accept","image/*",1,"form-control",3,"change"],[1,"mt-2"],[1,"text-muted"],["class","mt-3",4,"ngIf"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","button",1,"btn","btn-outline-secondary","me-md-2",3,"click"],["type","submit",1,"btn","btn-orange-red",3,"disabled"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],[1,"mt-3"],[1,"img-thumbnail",2,"max-height","150px",3,"src"]],template:function(o,r){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),e.EFF(6,"Registro de Platillo"),e.k0s()(),e.j41(7,"div",6)(8,"form",7),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(9,"div",8)(10,"label",9),e.EFF(11,"Restaurante"),e.k0s(),e.j41(12,"select",10)(13,"option",11),e.EFF(14,"Seleccione un restaurante"),e.k0s(),e.DNE(15,F,2,2,"option",12),e.k0s(),e.DNE(16,_,2,1,"div",13),e.k0s(),e.j41(17,"div",8)(18,"label",14),e.EFF(19,"Nombre del Platillo"),e.k0s(),e.nrm(20,"input",15),e.DNE(21,k,3,2,"div",13),e.k0s(),e.j41(22,"div",8)(23,"label",16),e.EFF(24,"Descripci\xf3n"),e.k0s(),e.nrm(25,"textarea",17),e.DNE(26,M,2,1,"div",13),e.k0s(),e.j41(27,"div",8)(28,"label",18),e.EFF(29,"Precio ($)"),e.k0s(),e.nrm(30,"input",19),e.DNE(31,I,3,2,"div",13),e.k0s(),e.j41(32,"div",8)(33,"label",20),e.EFF(34,"Categor\xeda"),e.k0s(),e.j41(35,"select",21)(36,"option",11),e.EFF(37,"Seleccione una categor\xeda"),e.k0s(),e.j41(38,"option",22),e.EFF(39,"Entrada"),e.k0s(),e.j41(40,"option",23),e.EFF(41,"Plato fuerte"),e.k0s(),e.j41(42,"option",24),e.EFF(43,"Postre"),e.k0s(),e.j41(44,"option",25),e.EFF(45,"Bebida"),e.k0s()(),e.DNE(46,D,2,1,"div",13),e.k0s(),e.j41(47,"div",8)(48,"label",26),e.EFF(49,"Tiempo de preparaci\xf3n (minutos)"),e.k0s(),e.nrm(50,"input",27),e.DNE(51,Y,3,2,"div",13),e.k0s(),e.j41(52,"div",8)(53,"label",28),e.EFF(54,"Disponible"),e.k0s(),e.j41(55,"select",29)(56,"option",11),e.EFF(57,"Seleccione una opcion"),e.k0s(),e.j41(58,"option",30),e.EFF(59,"Si"),e.k0s(),e.j41(60,"option",31),e.EFF(61,"No"),e.k0s()(),e.DNE(62,y,2,1,"div",13),e.k0s(),e.j41(63,"div",32)(64,"label",33),e.EFF(65,"Imagen del platillo"),e.k0s(),e.j41(66,"input",34),e.bIt("change",function(p){return r.onFileSelected(p)}),e.k0s(),e.j41(67,"div",35)(68,"small",36),e.EFF(69,"Formatos aceptados: JPG, PNG, WEBP (M\xe1x. 2MB)"),e.k0s()(),e.DNE(70,q,2,1,"div",37),e.k0s(),e.j41(71,"div",38)(72,"button",39),e.bIt("click",function(){return r.onCancel()}),e.EFF(73," Cancelar "),e.k0s(),e.j41(74,"button",40),e.EFF(75," Guardar Platillo "),e.k0s()()()()()()()()),2&o&&(e.R7$(8),e.Y8G("formGroup",r.platilloForm),e.R7$(4),e.Y8G("ngClass",e.eq3(18,s,(null==r.restauranteId?null:r.restauranteId.touched)&&(null==r.restauranteId?null:r.restauranteId.invalid))),e.R7$(3),e.Y8G("ngForOf",r.getRestaurantMenu),e.R7$(1),e.Y8G("ngIf",(null==r.restauranteId?null:r.restauranteId.touched)&&(null==r.restauranteId?null:r.restauranteId.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(20,s,(null==r.nombre?null:r.nombre.touched)&&(null==r.nombre?null:r.nombre.invalid))),e.R7$(1),e.Y8G("ngIf",(null==r.nombre?null:r.nombre.touched)&&(null==r.nombre?null:r.nombre.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(22,s,(null==r.descripcion?null:r.descripcion.touched)&&(null==r.descripcion?null:r.descripcion.invalid))),e.R7$(1),e.Y8G("ngIf",(null==r.descripcion?null:r.descripcion.touched)&&(null==r.descripcion?null:r.descripcion.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(24,s,(null==r.precio?null:r.precio.touched)&&(null==r.precio?null:r.precio.invalid))),e.R7$(1),e.Y8G("ngIf",(null==r.precio?null:r.precio.touched)&&(null==r.precio?null:r.precio.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(26,s,(null==r.categoria?null:r.categoria.touched)&&(null==r.categoria?null:r.categoria.invalid))),e.R7$(11),e.Y8G("ngIf",(null==r.categoria?null:r.categoria.touched)&&(null==r.categoria?null:r.categoria.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(28,s,(null==r.tiempoPreparacion?null:r.tiempoPreparacion.touched)&&(null==r.tiempoPreparacion?null:r.tiempoPreparacion.invalid))),e.R7$(1),e.Y8G("ngIf",(null==r.tiempoPreparacion?null:r.tiempoPreparacion.touched)&&(null==r.tiempoPreparacion?null:r.tiempoPreparacion.invalid)),e.R7$(4),e.Y8G("ngClass",e.eq3(30,s,(null==r.disponible?null:r.disponible.touched)&&(null==r.disponible?null:r.disponible.invalid))),e.R7$(7),e.Y8G("ngIf",(null==r.disponible?null:r.disponible.touched)&&(null==r.disponible?null:r.disponible.invalid)),e.R7$(8),e.Y8G("ngIf",r.imagenPrevia),e.R7$(4),e.Y8G("disabled",r.platilloForm.invalid))},dependencies:[d.YU,d.Sq,d.bT,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.BC,l.cb,l.j4,l.JD],styles:[".btn-orange-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#FF6B35,#EF3E36);color:#fff;border:none}.btn-orange-red[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e05f2a,#d13730);color:#fff}.btn-orange-red[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#ffb08a,#f58a85);cursor:not-allowed}.bg-gradient-orange-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#FF6B35,#EF3E36)}"]})}}return i})()}];let S=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[v.iI.forChild(B),v.iI]})}}return i})(),A=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[d.MD,l.X1,l.YN,S]})}}return i})()}}]);